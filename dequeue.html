<!DOCTYPE html><html><head><title>cats-collections: Dequeue</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="org.typelevel" /><meta name="description" content="pure functional data structures for Scala" /><meta name="og:image" content="/cats-collections//img/poster.png" /><meta name="image" property="og:image" content="/cats-collections//img/poster.png" /><meta name="og:title" content="cats-collections: Dequeue" /><meta name="title" property="og:title" content="cats-collections: Dequeue" /><meta name="og:site_name" content="cats-collections" /><meta name="og:url" content="http://typelevel.org/cats-collections/" /><meta name="og:type" content="website" /><meta name="og:description" content="pure functional data structures for Scala" /><link rel="icon" type="image/png" href="/cats-collections//img/favicon.png" /><meta name="twitter:title" content="cats-collections: Dequeue" /><meta name="twitter:image" content="/cats-collections//img/poster.png" /><meta name="twitter:description" content="pure functional data structures for Scala" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/cats-collections//img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/cats-collections//img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/cats-collections//img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/cats-collections//img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/cats-collections//img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/cats-collections//img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/cats-collections//img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/cats-collections//img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/cats-collections//img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/cats-collections//img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/cats-collections//img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/cats-collections//img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/cats-collections//img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/cats-collections//img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/cats-collections//img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/cats-collections//img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/cats-collections//img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/cats-collections//img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/cats-collections//img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/cats-collections//img/favicon310x150.png" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/cats-collections//highlight/styles/vs.css" /><link rel="stylesheet" href="/cats-collections//css/light-style.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><div id="sidebar-brand"><a href="/cats-collections//" class="brand"><div class="brand-wrapper"></div><span>cats-collections</span></a><button id="main-toggle" class="sidebar-toggle"><span class="close"></span></button></div><div class="sidebar-nav"> <div class="sidebar-nav-item  "><a href="/cats-collections/index.html" title="Home" class="">Home</a></div> <div class="sidebar-nav-item  "><a href="/cats-collections/binaryheap.html" title="Binary Heap" class="">Binary Heap</a></div> <div class="sidebar-nav-item active "><a href="/cats-collections/dequeue.html" title="Dequeue" class="active">Dequeue</a></div> <div class="sidebar-nav-item  "><a href="/cats-collections/diet.html" title="Diet" class="">Diet</a></div> <div class="sidebar-nav-item  "><a href="/cats-collections/discrete.html" title="Discrete" class="">Discrete</a></div> <div class="sidebar-nav-item  "><a href="/cats-collections/disjointsets.html" title="Disjoint Sets" class="">Disjoint Sets</a></div> <div class="sidebar-nav-item  "><a href="/cats-collections/predicate.html" title="Predicate" class="">Predicate</a></div> <div class="sidebar-nav-item  "><a href="/cats-collections/range.html" title="Range" class="">Range</a></div> <div class="sidebar-nav-item  "><a href="/cats-collections/set.html" title="AvlSet" class="">AvlSet</a></div></div></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li class="search-nav"><div id="search-dropdown"><label><i class="fa fa-search"></i>Search</label><input id="search-bar" type="text" placeholder="Enter keywords here..." onclick="displayToggleSearch(event)" /><ul id="search-dropdown-content" class="dropdown dropdown-content"></ul></div></li><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/typelevel/cats-collections" target="_blank" rel="noopener noreferrer"><i class="fa fa-eye"></i><span>Watchers<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/typelevel/cats-collections" target="_blank" rel="noopener noreferrer"><i class="fa fa-star-o"></i><span>Stars<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="typelevel" data-github-repo="cats-collections"><div class="content-wrapper"><section><h1 id="dequeue">Dequeue</h1>

<p><code class="language-plaintext highlighter-rouge">Dequeue</code> is a double-ended queue. It offers constant time cons and
snoc, and amortized constant time uncons and unsnoc. Let’s define
these terms first:</p>

<ul>
  <li>cons: to push a value onto the left of the list.</li>
  <li>snoc: to push a value onto the right of the list.</li>
  <li>uncons: to pop a value off the left of the list.</li>
  <li>unsnoc: to pop a value off the right of the list.</li>
</ul>

<p>It is also worth spending some time discussing what we mean by
“amortized constant time”. Internally, the <code class="language-plaintext highlighter-rouge">Dequeue</code> uses Lists as
stacks to store items which are pushed onto either side. Lets say we
currently have a Dequeue containing the numbers 1 through 8, this
might be stored like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> left stack:                     right stack:
      1                               8
      2                               7
      3                               6
      4                               5
</code></pre></div></div>

<p>In this configuration, we can pop off three items from the left side
in constant time (O(1)). However, we will have to do more computation
when we pop off the 4th. Since we don’t want to leave either stack
completely empty, when we pop the 4th item off the left, we will grab
half of the elements from the bottom of the right stack, to make more
available in the left stack. So before this operation, we have:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> left stack:                     right stack:
   (empty)                            8
                                      7
                                      6
                                      5
</code></pre></div></div>

<p>And after, we have:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> left stack:                     right stack:
     5                                8
     6                                7
</code></pre></div></div>

<p>This process of reshuffling the stacks to make sure we have items
available on both sides is actually a linear (O(n))
operation. However, since we only have to perform this operation after
every n/2 pop operations, we can say that this is constant time when
amortized over enough operations.</p>
</section></div></div></div></div><script src="/cats-collections//highlight/highlight.pack.js"></script><script src="/cats-collections//lunr/lunr.js"></script><script>
// For all code blocks, copy the language from the containing div
// to the inner code tag (where hljs expects it to be)
const langPrefix = 'language-';
document.querySelectorAll(`div[class^='${langPrefix}']`).forEach(function(div) {
  div.classList.forEach(function(cssClass) {
    if (cssClass.startsWith(langPrefix)) {
      const lang = cssClass.substring(langPrefix.length);
      div.querySelectorAll('pre code').forEach(function(code) {
        code.classList.add(lang);
      });
    }
  });
});

hljs.configure({languages:['scala','java','bash']});
hljs.initHighlightingOnLoad();
      </script><script>console.info('\x57\x65\x62\x73\x69\x74\x65\x20\x62\x75\x69\x6c\x74\x20\x77\x69\x74\x68\x3a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x5f\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x5f\x20\x5f\x5f\x0a\x20\x20\x20\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x5f\x20\x20\x2f\x20\x2f\x5f\x20\x20\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x5f\x5f\x5f\x20\x20\x28\x5f\x29\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x28\x5f\x29\x20\x2f\x5f\x5f\x5f\x5f\x20\x20\x5f\x5f\x5f\x5f\x5f\x0a\x20\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x60\x5f\x5f\x20\x5c\x2f\x20\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x5f\x2f\x20\x5f\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x20\x2f\x20\x5f\x5f\x2f\x20\x5f\x20\x5c\x2f\x20\x5f\x5f\x5f\x2f\x0a\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x5f\x2f\x20\x2f\x20\x2f\x5f\x2f\x5f\x5f\x5f\x5f\x5f\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x20\x2f\x5f\x5f\x2f\x20\x2f\x20\x20\x2f\x20\x2f\x5f\x2f\x20\x28\x5f\x5f\x20\x20\x29\x20\x2f\x20\x2f\x5f\x2f\x20\x20\x5f\x5f\x28\x5f\x5f\x20\x20\x29\x0a\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2e\x5f\x5f\x5f\x2f\x5c\x5f\x5f\x2f\x20\x20\x20\x20\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x20\x2f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x2f\x20\x20\x20\x5c\x5f\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x5f\x2f\x5c\x5f\x5f\x2f\x5c\x5f\x5f\x5f\x2f\x5f\x5f\x5f\x5f\x2f\x0a\x0a\x68\x74\x74\x70\x73\x3a\x2f\x2f\x34\x37\x64\x65\x67\x2e\x67\x69\x74\x68\x75\x62\x2e\x69\x6f\x2f\x73\x62\x74\x2d\x6d\x69\x63\x72\x6f\x73\x69\x74\x65\x73')</script><script>((window.gitter = {}).chat = {}).options = {
room: 'typelevel/cats-collections'};</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script><script src="/cats-collections//js/search.js"></script><script src="/cats-collections//js/docs.js"></script></body></html>